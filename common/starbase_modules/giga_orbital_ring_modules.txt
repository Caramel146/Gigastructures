orbital_ring_giga_mining_district = {
	icon = "GFX_orbitalring_module_giga_mining_district"
	section = "HANGAR_ORBITAL_RING_SECTION"
	construction_days = 360
	starbase_type = orbital_ring
	potential = {
		exists = owner
		owner = {
			has_technology = tech_mining_3
		}
		is_orbital_ring = yes
	}
	show_in_tech = "tech_mining_3"
	resources = {
		category = starbase_modules
		cost = {
			alloys = 300
			influence = 25
		}
		upkeep = {
			energy = 3
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			orbit = {
				NOR = {
					is_planet_class = pc_ll_temperate
					is_planet_class = pc_ll_foggy
					is_planet_class = pc_ll_torrid
				}
			}
		}
		district_mining_max = 2
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			orbit = {
				or = {
					is_planet_class = pc_ll_temperate
					is_planet_class = pc_ll_foggy
					is_planet_class = pc_ll_torrid
				}
			}
		}
		district_mining_max = 3
	}
	#replaceable = {
	#	custom_tooltip = {
	#		fail_text = giga_cant_remove_orbital_ring_part
	#		planet = {
	#			NOT = {
	#				uses_district_set = standard
	#			}
	#		}
	#	}
	#}
	ai_build_at_chokepoint = no
	ai_build_outside_chokepoint = yes
	ai_weight = {
		# TODO DESIGN improve weights
		weight = 0
		modifier = {
			add = 20
			planet = {
				has_designation = col_mining
			}
		}
	}
}

orbital_ring_giga_generator_district = {
	icon = "GFX_orbitalring_module_giga_generator_district"
	section = "SOLAR_PANEL_ORBITAL_RING_SECTION"
	construction_days = 360
	starbase_type = orbital_ring
	potential = {
		exists = owner
		owner = {
			has_technology = tech_power_plant_4
		}
		is_orbital_ring = yes
	}
	show_in_tech = "tech_power_plant_4"
	resources = {
		category = starbase_modules
		cost = {
			alloys = 300
			influence = 25
		}
		upkeep = {
			energy = 3
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			solar_system = {
				any_system_planet = {
					is_planet_class = pc_m_star
				}
				NOT = {
					any_system_planet = {
						OR = {
							is_planet_class = pc_k_star
							is_planet_class = pc_g_star
							is_planet_class = pc_f_star
							is_planet_class = pc_a_star
							is_planet_class = pc_m_giant_star
							is_planet_class = pc_b_star
							is_planet_class = pc_giga_o_star
						}
					}
				}
			}
		}
		district_generator_max = 1
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			solar_system = {
				any_system_planet = {
					is_planet_class = pc_k_star
				}
				NOT = {
					any_system_planet = {
						OR = {
							is_planet_class = pc_a_star
							is_planet_class = pc_f_star
							is_planet_class = pc_g_star
							is_planet_class = pc_m_giant_star
							is_planet_class = pc_b_star
							is_planet_class = pc_giga_o_star
						}
					}
				}
			}
		}
		district_generator_max = 1
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			solar_system = {
				any_system_planet = {
					is_planet_class = pc_g_star
				}
				NOT = {
					any_system_planet = {
						OR = {
							is_planet_class = pc_f_star
							is_planet_class = pc_a_star
							is_planet_class = pc_m_giant_star
							is_planet_class = pc_b_star
							is_planet_class = pc_giga_o_star
						}
					}
				}
			}
		}
		district_generator_max = 2
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			solar_system = {
				any_system_planet = {
					is_planet_class = pc_f_star
				}
				NOT = {
					any_system_planet = {
						OR = {
							is_planet_class = pc_a_star
							is_planet_class = pc_m_giant_star
							is_planet_class = pc_b_star
							is_planet_class = pc_giga_o_star
						}
					}
				}
			}
		}
		district_generator_max = 2
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			solar_system = {
				any_system_planet = {
					is_planet_class = pc_a_star
				}
				NOT = {
					any_system_planet = {
						OR = {
							is_planet_class = pc_m_giant_star
							is_planet_class = pc_b_star
							is_planet_class = pc_giga_o_star
						}
					}
				}
			}
		}
		district_generator_max = 2
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			solar_system = {
				any_system_planet = {
					is_planet_class = pc_m_giant_star
				}
				NOT = {
					any_system_planet = {
						OR = {
							is_planet_class = pc_b_star
							is_planet_class = pc_giga_o_star
						}
					}
				}
			}
		}
		district_generator_max = 3
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			solar_system = {
				any_system_planet = {
					is_planet_class = pc_b_star
				}
				NOT = {
					any_system_planet = {
						is_planet_class = pc_giga_o_star
					}
				}
			}
		}
		district_generator_max = 3
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			solar_system = {
				any_system_planet = {
					is_planet_class = pc_giga_o_star
				}
			}
		}
		district_generator_max = 4
	}
	# Other star types
	triggered_planet_modifier = {
		potential = {
			exists = owner
			solar_system = {
				any_system_planet = {
					is_star = yes
					NOR = {
						is_planet_class = pc_t_star
						is_planet_class = pc_black_hole
						is_planet_class = pc_neutron_star
						is_planet_class = pc_pulsar
					}
				}
				NOT = {
					any_system_planet = {
						OR = {
							is_planet_class = pc_m_star
							is_planet_class = pc_k_star
							is_planet_class = pc_g_star
							is_planet_class = pc_f_star
							is_planet_class = pc_a_star
							is_planet_class = pc_m_giant_star
							is_planet_class = pc_b_star
							is_planet_class = pc_giga_o_star
						}
					}
				}
			}
		}
		district_generator_max = 2
	}
	#replaceable = {
	#	custom_tooltip = {
	#		fail_text = giga_cant_remove_orbital_ring_part
	#		planet = {
	#			NOT = {
	#				uses_district_set = standard
	#			}
	#		}
	#	}
	#}
	ai_build_at_chokepoint = no
	ai_build_outside_chokepoint = yes
	ai_weight = {
		# TODO DESIGN improve weights
		weight = 0
		modifier = {
			add = 20
			planet = {
				has_designation = col_generator
			}
		}
	}
}

orbital_ring_giga_farming_district = {
	icon = "GFX_orbitalring_module_giga_farming_district"
	section = "HABITAT_ORBITAL_RING_SECTION"
	construction_days = 360
	starbase_type = orbital_ring
	potential = {
		exists = owner
		owner = {
			has_technology = tech_nutrient_replication
		}
		is_orbital_ring = yes
	}
	show_in_tech = "tech_nutrient_replication"
	resources = {
		category = starbase_modules
		cost = {
			alloys = 300
			influence = 25
		}
		upkeep = {
			energy = 3
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			orbit = {
				NOR = {
					is_planet_class = pc_gaia
					is_planet_class = pc_nuked
					is_planet_class = pc_katzenland
				}
			}
		}
		district_farming_max = 2
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			orbit = {
				is_planet_class = pc_nuked
			}
		}
		district_farming_max = 1
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			orbit = {
				is_planet_class = pc_gaia
			}
		}
		district_farming_max = 3
	}
	#replaceable = {
	#	custom_tooltip = {
	#		fail_text = giga_cant_remove_orbital_ring_part
	#		planet = {
	#			NOT = {
	#				uses_district_set = standard
	#			}
	#		}
	#	}
	#}
	ai_build_at_chokepoint = no
	ai_build_outside_chokepoint = yes
	ai_weight = {
		# TODO DESIGN improve weights
		weight = 0
		modifier = {
			add = 20
			planet = {
				has_designation = col_farming
			}
		}
	}
}

orbital_ring_giga_arcology = {
	icon = "GFX_orbitalring_module_habitation"
	section = "HABITAT_ORBITAL_RING_SECTION"
	construction_days = 480
	starbase_type = orbital_ring

	potential = {
		exists = owner
		owner = { has_technology = giga_tech_orbital_arcologies }
		is_orbital_ring = yes
	}

	show_in_tech = giga_tech_orbital_arcologies

	resources = {
		category = starbase_modules
		cost = {
			alloys = 500
			influence = 50
		}

		upkeep = {
			energy = 10
			alloys = 10
		}
	}

	planet_modifier = {
		planet_max_districts_add = 2
	}

	triggered_planet_modifier = {
		planet_max_districts_mult = 0.05

		multiplier = value:giga_orbital_arcology_module_mult
	}

	inline_script = {
		script = planet/maintenance/giga_city_job_swap
		jobs = 2
	}

	triggered_planet_modifier = {
		potential = {
			exists = planet
			planet = {
				exists = owner.overlord
				has_holding = {
					holding = holding_orbital_assembly_complex
					owner = owner.overlord
				}
			}
		}
		planet_max_buildings_add = 1
	}

	#TODO: work out how to handle the district loss
	#replaceable = {
	#	custom_tooltip = {
	#		fail_text = orbital_ring_habitation_districts_maxed_out
	#		OR = { # to keep tooltip from showing up when no module is built yet
	#			NOT = { has_starbase_module = orbital_ring_habitation }
	#			AND = {
	#				has_starbase_module = orbital_ring_habitation
	#				planet = {
	#					num_free_districts = { type = any value >= 2 }
	#				}
	#			}
	#		}
	#	}
	#}

	ai_weight = {
		weight = 100
	}
}