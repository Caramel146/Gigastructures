entity = "matrioshka_brain_02_entity"
construction_entity = "matrioshka_brain_p2_entity"
portrait = "GFX_megastructure_construction_background"
upgrade_from = { matrioshka_brain_1_$class$_star }
ai_weight = { factor = value:giga_ai_base_continue } # If we can build it, we will build it

build_time = $time$
resources = {
    category = giga_gigastructures
    cost = {
        alloys = $cost_alloys$
        unity = $cost_unity$
    }
    cost = { alloys = -1 multiplier = value:giga_ai_savings_cost|CATEGORY|important|RESOURCE|alloys|AMOUNT|$cost_alloys$| }
    cost = { unity = -1 multiplier = value:giga_ai_savings_cost|CATEGORY|important|RESOURCE|unity|AMOUNT|$cost_unity$| }
    produces = {
        physics_research = $production$
        society_research = $production$
        engineering_research = $production$
    }
    upkeep = { alloys = $upkeep$ }
}

on_build_start = {
    giga_ai_savings_withdraw = { CATEGORY = important RESOURCE = alloys AMOUNT = $cost_alloys$ }
    giga_ai_savings_withdraw = { CATEGORY = important RESOURCE = unity  AMOUNT = $cost_unity$ }
}

potential = { NOT = { has_global_flag = matrioshka_brain_disabled } }
possible = {
    from = {
        has_gigastructural_constructs = yes
        has_technology = giga_tech_matrioshka_brain_1
    }
}

on_build_complete = {
    save_event_target_as = giga_system
    if = { limit = { exists = fromfrom.planet } fromfrom.planet = { save_event_target_as = giga_planet } }
    from = { country_event = { id = giga_dialog.503 } }	# Notification
}