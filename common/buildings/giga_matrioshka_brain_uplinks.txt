building_giga_matrioshka_brain_uplink = {
	base_buildtime = @b1_time
	position_priority = 150
	category = manufacturing

	empire_limit = {
		base = 0
		modifier = {
			exists = owner
			weight = owner.modifier:building_giga_matrioshka_brain_uplink_country_max
		}
	}

	allow = {
		has_upgraded_capital = yes
	}

	resources = {
		category = planet_giga_matrioshka_brain_uplinks
		cost = {
			minerals = @b2_minerals
			alloys = @b1_minerals
		}
		upkeep = {
			energy = 10
		}
	}

	prerequisites = {
		giga_tech_matrioshka_brain_1
	}

	upgrades = {
		building_giga_matrioshka_brain_uplink_research
		building_giga_matrioshka_brain_uplink_unity
		building_giga_matrioshka_brain_uplink_sanctuary
		building_giga_matrioshka_brain_uplink_entertainment
		building_giga_matrioshka_brain_uplink_training
		building_giga_matrioshka_brain_uplink_diplomacy
		building_giga_matrioshka_brain_uplink_hell
		building_giga_matrioshka_brain_uplink_livestock
		building_giga_matrioshka_brain_uplink_amalgamation
		building_giga_matrioshka_brain_uplink_foundry
		building_giga_matrioshka_brain_uplink_factory
		building_giga_matrioshka_brain_uplink_refinery
		building_giga_matrioshka_brain_uplink_anti_deviancy
		building_giga_matrioshka_brain_uplink_robot
	}
}

###################################################################################################################################
###################################################################################################################################
###################################################################################################################################

building_giga_matrioshka_brain_uplink_research = {
	inline_script = {
		script = buildings/matrioshka_uplinks/building_giga_matrioshka_brain_uplink
		name = research
		category = research
		resources = "
			cost = {
				exotic_gases = 500
			}
			upkeep = {
				exotic_gases = 4
			}
		"
	}

	inline_script = {
		script = planet/research/giga_researcher_job_swap
		jobs = 8
	}

	triggered_planet_modifier = {
		planet_researchers_produces_mult = 0.5
		planet_researchers_upkeep_mult = 0.5
	}

	triggered_planet_modifier = {
		multiplier = value:scripted_modifier_mult|MODIFIER|giga_planet_job_size|
		planet_researchers_energy_upkeep_add = 2
		planet_researchers_exotic_gases_upkeep_add = 0.1
	}
}

###################################################################################################################################
###################################################################################################################################

building_giga_matrioshka_brain_uplink_unity = {
	inline_script = {
		script = buildings/matrioshka_uplinks/building_giga_matrioshka_brain_uplink
		name = unity
		category = unity
		resources = "
			cost = {
				rare_crystals = 500
			}
			upkeep = {
				rare_crystals = 4
			}
		"
	}

	convert_to = {
		building_giga_matrioshka_brain_uplink_sanctuary
	}
	
	inline_script = {
		script = planet/unity/giga_unity_job_swap
		jobs = 8
	}

	triggered_planet_modifier = {
		planet_administrators_produces_mult = 0.5
		planet_administrators_upkeep_mult = 0.5
	}

	######################################################
	triggered_planet_modifier = { 
		potential = { 
			exists = owner 
			owner = {
				or = {
					is_worker_coop_empire = yes
					and = {
						is_megacorp = no
						giga_country_uses_priests = no
					}
				}
			}
		}				
		planet_administrators_energy_upkeep_add = 1
		planet_administrators_society_research_upkeep_add = 1
		multiplier = value:scripted_modifier_mult|MODIFIER|giga_planet_job_size|
	}

	######################################################
	triggered_planet_modifier = { 
		potential = { 
			exists = owner 
			owner = {
				giga_country_uses_priests = yes
			}
		}				
		planet_priests_energy_upkeep_add = 1
		planet_priests_society_research_upkeep_add = 1
		multiplier = value:scripted_modifier_mult|MODIFIER|giga_planet_job_size|
	}

	######################################################
	triggered_planet_modifier = { 
		potential = { 
			exists = owner 
			owner = { 
				is_megacorp = yes
				is_worker_coop_empire = no
			} 
		}				
		planet_managers_energy_upkeep_add = 1
		planet_managers_society_research_upkeep_add = 1
		multiplier = value:scripted_modifier_mult|MODIFIER|giga_planet_job_size|
	}
}

###################################################################################################################################
###################################################################################################################################

building_giga_matrioshka_brain_uplink_sanctuary = {
	inline_script = {
		script = buildings/matrioshka_uplinks/building_giga_matrioshka_brain_uplink
		name = sanctuary
		category = unity
		resources = "
			cost = {
				exotic_gases = 500
			}
			upkeep = {
				exotic_gases = 4
			}
		"
	}

	convert_to = {
		building_giga_matrioshka_brain_uplink_unity
	}

	triggered_planet_modifier = {
		job_bio_trophy_add = 50
		planet_bio_trophies_produces_mult = 0.5
		planet_bio_trophies_upkeep_mult = 0.5
	}

	triggered_planet_modifier = {
		multiplier = value:giga_planet_density_count_bio_trophies
		planet_jobs_complex_drone_produces_mult = 0.0025
	}

	triggered_planet_modifier = { 
		planet_bio_trophies_energy_upkeep_add = 0.5
		multiplier = value:scripted_modifier_mult|MODIFIER|giga_planet_job_size|
	}
}

###################################################################################################################################
###################################################################################################################################

building_giga_matrioshka_brain_uplink_entertainment = {
	inline_script = {
		script = buildings/matrioshka_uplinks/building_giga_matrioshka_brain_uplink
		name = entertainment
		category = amenity
		resources = "
			cost = {
				rare_crystals = 500
			}
			upkeep = {
				rare_crystals = 4
			}
		"
	}

	######################################################
	# normal empires
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = no
			}
		}
	}

	######################################################
	# servitors
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_civic = civic_machine_servitor
			}
		}
	}
}

###################################################################################################################################
###################################################################################################################################

building_giga_matrioshka_brain_uplink_training = {
	inline_script = {
		script = buildings/matrioshka_uplinks/building_giga_matrioshka_brain_uplink
		name = training
		category = government
		resources = "
			cost = {
				exotic_gases = 500
			}
			upkeep = {
				exotic_gases = 4
			}
		"
	}
}

###################################################################################################################################
###################################################################################################################################

building_giga_matrioshka_brain_uplink_diplomacy = {
	inline_script = {
		script = buildings/matrioshka_uplinks/building_giga_matrioshka_brain_uplink
		name = diplomacy
		category = government
		resources = "
			cost = {
				rare_crystals = 500
			}
			upkeep = {
				rare_crystals = 4
			}
		"
	}

	######################################################
	# normal empires
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_gestalt = no
			}
		}

		job_giga_virtual_diplomat_add = 4
		job_culture_worker_add = 4
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_gestalt = no
			}
		}
		text = job_giga_virtual_diplomat_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_gestalt = no
			}
		}
		text = job_culture_worker_effect_desc
	}

	######################################################
	# hive
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_hive_empire = yes
			}
		}

		job_giga_virtual_diplomat_drone_add = 4
		job_evaluator_add = 4
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_hive_empire = yes
			}
		}
		text = job_giga_virtual_diplomat_drone_effect_desc
	}

	######################################################
	# machines (only servitors by default)
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_machine_empire = yes
			}
		}

		job_giga_virtual_diplomat_machine_add = 4
		job_evaluator_add = 4
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_machine_empire = yes
			}
		}
		text = job_giga_virtual_diplomat_machine_effect_desc
	}

	######################################################
	# evaluators
	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_gestalt = yes
			}
		}
		text = job_evaluator_effect_desc
	}
}

###################################################################################################################################
###################################################################################################################################

building_giga_matrioshka_brain_uplink_hell = {
	inline_script = {
		script = buildings/matrioshka_uplinks/building_giga_matrioshka_brain_uplink
		name = hell
		category = government
		resources = "
			cost = {
				volatile_motes = 500
			}
			upkeep = {
				volatile_motes = 4
			}
		"
	}
}

###################################################################################################################################
###################################################################################################################################

building_giga_matrioshka_brain_uplink_livestock = {
	inline_script = {
		script = buildings/matrioshka_uplinks/building_giga_matrioshka_brain_uplink
		name = livestock
		category = resources
		resources = "
			cost = {
				minerals = 400
			}
			upkeep = {
				alloys = 2
			}
		"
	}
}

###################################################################################################################################
###################################################################################################################################

building_giga_matrioshka_brain_uplink_amalgamation = {
	inline_script = {
		script = buildings/matrioshka_uplinks/building_giga_matrioshka_brain_uplink
		name = amalgamation
		category = resources
		resources = "
			cost = {
				minerals = 400
			}
			upkeep = {
				alloys = 2
			}
		"
	}
}

###################################################################################################################################
###################################################################################################################################

building_giga_matrioshka_brain_uplink_foundry = {
	inline_script = {
		script = buildings/matrioshka_uplinks/building_giga_matrioshka_brain_uplink
		name = foundry
		category = manufacturing
		resources = "
			cost = {
				volatile_motes = 500
			}
			upkeep = {
				volatile_motes = 4
			}
		"
	}

	inline_script = {
		script = planet/alloys/giga_foundry_job_swap
		jobs = 8
	}

	triggered_planet_modifier = {
		planet_metallurgists_produces_mult = 0.5
		planet_metallurgists_upkeep_mult = 0.5
	}

	triggered_planet_modifier = {
		multiplier = value:scripted_modifier_mult|MODIFIER|giga_planet_job_size|
		planet_metallurgists_energy_upkeep_add = 2
		planet_metallurgists_engineering_research_upkeep_add = 1
	}
}

###################################################################################################################################
###################################################################################################################################

building_giga_matrioshka_brain_uplink_factory = {
	inline_script = {
		script = buildings/matrioshka_uplinks/building_giga_matrioshka_brain_uplink
		name = factory
		category = manufacturing
		resources = "
			cost = {
				rare_crystals = 500
			}
			upkeep = {
				rare_crystals = 4
			}
		"
	}

	inline_script = {
		script = planet/consumer_goods/giga_artisan_job_swap
		jobs = 8
	}

	triggered_planet_modifier = {
		planet_artisans_produces_mult = 0.5
		planet_artisans_upkeep_mult = 0.5
	}

	triggered_planet_modifier = {
		multiplier = value:scripted_modifier_mult|MODIFIER|giga_planet_job_size|
		planet_artisans_energy_upkeep_add = 1
		planet_artisans_society_research_upkeep_add = 1
	}
}

###################################################################################################################################
###################################################################################################################################

building_giga_matrioshka_brain_uplink_refinery = {
	inline_script = {
		script = buildings/matrioshka_uplinks/building_giga_matrioshka_brain_uplink
		name = refinery
		category = manufacturing
		resources = "
			cost = {
				minerals = 400
			}
			upkeep = {
				alloys = 4
			}
		"
	}
}

###################################################################################################################################
###################################################################################################################################

building_giga_matrioshka_brain_uplink_anti_deviancy = {
	inline_script = {
		script = buildings/matrioshka_uplinks/building_giga_matrioshka_brain_uplink
		name = anti_deviancy
		category = government
		resources = "
			cost = {
				volatile_motes = 500
			}
			upkeep = {
				volatile_motes = 2
			}
		"
	}
}

###################################################################################################################################
###################################################################################################################################

building_giga_matrioshka_brain_uplink_robot = {
	inline_script = {
		script = buildings/matrioshka_uplinks/building_giga_matrioshka_brain_uplink
		name = robot
		category = manufacturing
		resources = "
			cost = {
				rare_crystals = 500
			}
			upkeep = {
				rare_crystals = 4
			}
		"
	}
}
